=pod

=head1 NAME

xdg-monitor - startup-notification monitoring program

=head1 SYNOPSIS

B<xdg-monitor> [I<OPTIONS>]

=head1 DESCRIPTION

B<xdg-monitor> is a C<C> language program that monitors for startup
notification messages on the screens of an X Display  and reports
information to standard output in read time.  It is meant as a testing
and debugging tool for startup notification and for trouble-shooting XDG
Desktop Entry files.

=head1 OPTIONS

The options that are detailed below are recognized by B<xdg-monitor>.
B<xdg-monitor> uses L<getopt_long_only(3)>, so unambiguous abbreviations
of long options and long options with a single dash are also supported.

B<xdg-monitor> supports the following options:

=head2 COMMAND OPTIONS

The default is to start B<xdg-monitor> in the foreground with output
sent to standard error.

=over

=item [B<-m>, B<--monitor>]

Run as a monitoring process.  This is the default if no other command
option is specified.

=item B<-q>, B<--quit>

Ask a running instance of the program to quit (if one is indeed
running).

=item B<-h>, B<--help>

Prints usage information to standard output and exits.

=item B<-V>, B<--version>

Prints detailed version information and exits.

=item B<-C>, B<--copying>

Prints detailed copying permissions and exits.

=back

=head2 GENERAL OPTIONS

In addition to command options, B<xdg-monitor> accepts the following
general options:

=over

=item B<-r>, B<--replace>

Replace an existing running instance.  The default is to abort when an
already running instance is encountered.

=item B<-f>, B<--foreground>

The default behaviour is for the program to run in the background as a
deamon process; this option causes the program to run in the foreground
and output debugging information to standard error (implies B<-d>).

=item B<-g>, B<--guard-time> I<TIMEOUT>

Specifies the amount of time, I<TIMEOUT>, in milliseconds, that
B<xdg-monitor> will wait for a desktop application to complete before
determining that is it never going to send a startup notification
completion message.  The default is 15000 milliseconds (15 seconds).

=item B<-d>, B<--debug> [I<LEVEL>]

Increment or set the verbosity of debugging output to I<LEVEL>.  The
default is to not print copious debugging information.

=item B<-v>, B<--verbose> [I<LEVEL>]

Increment or set the verbosity of normal output to I<LEVEL>.  The
default for output is level 1.

=back

=head1 USAGE

The primary purpose of the B<xdg-monitor> program is to expose visually
the information flow between launcher and launchee according to the
startup notification protocol.  Also, its purpose is to check that the
coding of C<StartupNotify> and C<StartupWMClass> fields of desktop entry
files are correct.  To perform this function correctly, B<xdg-monitor>
must be started in the same environment as the launcher.

=head1 BEHAVIOUR

B<xdg-monitors> monitors the communication between launcher and launchee
according to the startup notification protocol and also monitors the
actions taken and reported as supported by the window manager.  When
C<APPID> information is present in the startup notification C<new> or
C<change> messages, B<xdg-monitor> also checks the desktop file
corresponding to the startup notification sequence to determine whether
appropriate information has been provided in the desktop entry file that
is consistent with the behaviour of the launched application.  To
perform these functions B<xdg-monitor> takes the following steps:

=over

=item 1.

=item 2.

=item 3.

=back

=head1 ENVIRONMENT

The following environment variables are examined by B<xdg-monitor>, both
in its own environment as well as in the environments of monitored
processes:

=over

=item B<DISPLAY>

Used by B<xdg-monitor> to determine the X display and default screen on
which it has been invoked.

=item B<DESKTOP_STARTUP_ID>

Used by B<xdg-monitor> at program startup to determine whether it itself
has been launched with startup notification.  The B<DESKTOP_STARTUP_ID>
is removed from the environment in this case and a startup notification
C<remove:> message is issued to complete its own startup.

B<xdg-monitor> also monitors for this environment variable in processes
to which it has access to match appearing processes with startup
notification.  A client that properly supports desktop startup
notification will remove this environment variable from its environment
at startup.  One that ignores the environment variable will not remove
it.

=item B<LANG>

Used by B<xdg-monitor> at program startup to determine the language to
use to select the language for C<Name>, C<GenericName> and C<Comment>
fields from the desktop entry file.

=item B<HOME>

Used by B<xdg-monitor> to determine the user's home directory.

=item B<XDG_CURRENT_DESKTOP>

Used to determine the suitability of launching from a desktop entry
file when an C<APPID> is provided in the startup notification sequence.

=item B<XDG_DATA_HOME>

Used by B<xdg-launch> to determine the user's XDG data directory.  This
defaults to F<$HOME/.local/share>.  The F<applications> subdirectory
under this directory is the first searched to locate desktop entry
files.  See the XDG Desktop Entry file specification for more
information.

=item B<XDG_DATA_DIRS>

Used by B<xdg-launch> to determine the system XDG data directories.
This defaults to F</usr/local/share:/usr/share>.  The F<applications>
subdirectory under these directories are searched in order to locate
desktop entry files.  See the XDG Desktop Entry file specification for
more information.

=item B<XDG_CONFIG_HOME>

Used to determine the user's configuration home directory for locating
autostart desktop entry files.  Autostart desktop entry files reside in
the F<autostart> subdirectory of this directory.

=item B<XDG_CONFIG_DIRS>

Used to determine the system configuration directories for locating
autostart desktop entry files.  Autostart desktop entry files reside in
an B<autostart> subdirectory of these directories.

=back

=head1 BUGS

B<xdg-monitor> has no known bugs.
Please report bugs to the source code repository at
L<https://github.com/bbidulock/xdg-launch/issues>.

=head1 AUTHOR

Brian Bidulock L<mailto:bidulock@openss7.org>

=cut

# vim: set sw=4 tw=72 nocin spell spelllang=en_ca:
